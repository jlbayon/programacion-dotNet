# Ejercicios Resueltos: Control de Excepciones en C#

A continuación se presentan **20 ejercicios resueltos** sobre control de excepciones en C#.

---

## Ejercicio 1: División entre cero
**Enunciado:** Captura la excepción de una división entre cero.

```csharp
try {
    int a = 10, b = 0;
    Console.WriteLine(a / b);
} catch (DivideByZeroException e) {
    Console.WriteLine("Error: división por cero");
}
```

---

## Ejercicio 2: Conversión inválida
**Enunciado:** Maneja la excepción al convertir texto en número.

```csharp
try {
    int n = int.Parse("abc");
} catch (FormatException e) {
    Console.WriteLine("Formato no válido");
}
```

---

## Ejercicio 3: Acceso a índice fuera de rango
**Enunciado:** Captura el error de acceso incorrecto a un array.

```csharp
try {
    int[] arr = {1,2,3};
    Console.WriteLine(arr[5]);
} catch (IndexOutOfRangeException e) {
    Console.WriteLine("Índice fuera de rango");
}
```

---

## Ejercicio 4: Excepción general
**Enunciado:** Captura cualquier excepción no prevista.

```csharp
try {
    object obj = null;
    Console.WriteLine(obj.ToString());
} catch (Exception e) {
    Console.WriteLine($"Error general: {e.Message}");
}
```

---

## Ejercicio 5: Bloque finally
**Enunciado:** Usa `finally` para mostrar un mensaje final.

```csharp
try {
    int a = 5, b = 0;
    Console.WriteLine(a/b);
} catch {
    Console.WriteLine("Error");
} finally {
    Console.WriteLine("Ejecución finalizada");
}
```

---

## Ejercicio 6: Multiples catch
**Enunciado:** Usa varios `catch` para distintos errores.

```csharp
try {
    int n = int.Parse("abc");
} catch (FormatException) {
    Console.WriteLine("Formato incorrecto");
} catch (Exception) {
    Console.WriteLine("Otro error");
}
```

---

## Ejercicio 7: Excepción personalizada
**Enunciado:** Lanza y captura una excepción definida por el usuario.

```csharp
class MiExcepcion : Exception {
    public MiExcepcion(string msg) : base(msg) {}
}

try {
    throw new MiExcepcion("Error propio");
} catch (MiExcepcion e) {
    Console.WriteLine(e.Message);
}
```

---

## Ejercicio 8: NullReferenceException
**Enunciado:** Maneja el acceso a objeto nulo.

```csharp
try {
    string s = null;
    Console.WriteLine(s.Length);
} catch (NullReferenceException) {
    Console.WriteLine("Referencia nula");
}
```

---

## Ejercicio 9: Overflow
**Enunciado:** Controla desbordamiento en operaciones aritméticas.

```csharp
try {
    int x = int.MaxValue;
    checked {
        int y = x + 1;
    }
} catch (OverflowException) {
    Console.WriteLine("Desbordamiento detectado");
}
```

---

## Ejercicio 10: Checked y unchecked
**Enunciado:** Diferencia entre `checked` y `unchecked`.

```csharp
int x = int.MaxValue;
try {
    checked {
        int y = x + 1;
    }
} catch (OverflowException) {
    Console.WriteLine("Detectado con checked");
}

unchecked {
    int z = x + 1;
    Console.WriteLine(z); // valor incorrecto sin error
}
```

---

## Ejercicio 11: ArgumentOutOfRangeException
**Enunciado:** Maneja error de argumento fuera de rango.

```csharp
try {
    string texto = "Hola";
    Console.WriteLine(texto.Substring(10));
} catch (ArgumentOutOfRangeException) {
    Console.WriteLine("Índice no válido en Substring");
}
```

---

## Ejercicio 12: DirectoryNotFoundException
**Enunciado:** Captura error al acceder a carpeta inexistente.

```csharp
try {
    string[] archivos = Directory.GetFiles("carpetaInexistente");
} catch (DirectoryNotFoundException) {
    Console.WriteLine("Carpeta no encontrada");
}
```

---

## Ejercicio 13: FileNotFoundException
**Enunciado:** Captura error al abrir un archivo inexistente.

```csharp
try {
    string texto = File.ReadAllText("noexiste.txt");
} catch (FileNotFoundException) {
    Console.WriteLine("Archivo no encontrado");
}
```

---

## Ejercicio 14: UnauthorizedAccessException
**Enunciado:** Maneja error por permisos denegados.

```csharp
try {
    File.WriteAllText("C:/Windows/system.txt", "Test");
} catch (UnauthorizedAccessException) {
    Console.WriteLine("Acceso denegado");
}
```

---

## Ejercicio 15: Lanzar excepción manual
**Enunciado:** Usa `throw` para lanzar una excepción.

```csharp
try {
    throw new Exception("Error manual");
} catch (Exception e) {
    Console.WriteLine(e.Message);
}
```

---

## Ejercicio 16: Rethrow excepción
**Enunciado:** Relanza una excepción capturada.

```csharp
try {
    try {
        int a = int.Parse("abc");
    } catch (FormatException e) {
        Console.WriteLine("Error interno");
        throw;
    }
} catch {
    Console.WriteLine("Error relanzado");
}
```

---

## Ejercicio 17: Excepción en métodos
**Enunciado:** Método que lanza excepción.

```csharp
void Dividir(int a, int b) {
    if (b == 0) throw new DivideByZeroException();
    Console.WriteLine(a/b);
}

try {
    Dividir(5,0);
} catch (DivideByZeroException) {
    Console.WriteLine("No se puede dividir entre 0");
}
```

---

## Ejercicio 18: TryParse seguro
**Enunciado:** Usa `int.TryParse()` para evitar excepciones.

```csharp
string texto = "123x";
if (int.TryParse(texto, out int numero))
    Console.WriteLine(numero);
else
    Console.WriteLine("Conversión fallida");
```

---

## Ejercicio 19: AggregateException
**Enunciado:** Maneja varias excepciones con `AggregateException`.

```csharp
try {
    Task t1 = Task.Run(() => throw new Exception("Error 1"));
    Task t2 = Task.Run(() => throw new Exception("Error 2"));
    Task.WaitAll(t1, t2);
} catch (AggregateException ae) {
    foreach (var e in ae.InnerExceptions)
        Console.WriteLine(e.Message);
}
```

---

## Ejercicio 20: Using con manejo de excepciones
**Enunciado:** Usa `using` para asegurar cierre de recursos.

```csharp
try {
    using (StreamReader sr = new StreamReader("archivo.txt")) {
        Console.WriteLine(sr.ReadToEnd());
    }
} catch (Exception e) {
    Console.WriteLine("Error al leer archivo: " + e.Message);
}
```

---

✍️ **Objetivo:** Practicar el uso de excepciones en C#, incluyendo `try-catch`, `finally`, excepciones personalizadas y manejo de recursos.
